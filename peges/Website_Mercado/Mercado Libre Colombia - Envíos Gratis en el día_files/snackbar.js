var SnackbarWidget=function(){"use strict";let n;var t=class{constructor(n){const t={};if([{message:"",type:"default",autoClose:!0,mountElement:"main",action:{title:"",link:"",callback:void 0},delay:3e3},n].forEach((n=>{Object.keys(n).forEach((e=>{Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}))})),!t.message||""===t.message.trim())throw new Error("Snackbar: message cannot be empty.");if(Object.prototype.hasOwnProperty.call(t,"mountElement")&&("string"===(t.mountElement,!1)||""===t.mountElement.trim()))throw new Error("Snackbar: mountElement has to be a string and it cannot be empty.");return this.config=t,this.ui={container:window.document.querySelector(this.config.mountElement)||window.document.body},this.classes={component:"ui-snackbar",active:"ui-snackbar--is-active",inactive:"ui-snackbar--is-inactive",type:`ui-snackbar--${t.type}`,message:"ui-snackbar__message",action:"ui-snackbar__action"},this.handlers={customCallback:this.customCallback.bind(this)},this.el=this.ui.container.querySelector(`.${this.classes.component}`),this.action=this.getAction(),this.timings={closeDelay:t.delay,animationDelay:500,touchDelay:300},this.init(),this}init(){this.el?this.hasClass(this.el,this.classes.active)?(this.hide(),this.delay("animationDelay",(()=>{this.edit(),this.show()}))):(this.edit(),this.show()):(this.create(),this.show())}create(){this.ui.container.insertAdjacentHTML("beforeend",this.getTemplate())}edit(){this.el.className=this.getInitialClasses(),this.el.innerHTML=this.getInnerTemplate()}show(){this.el=this.ui.container.querySelector(`.${this.classes.component}`),this.el&&(this.addClass(this.el,this.classes.active),this.config.autoClose&&this.config.delay&&this.autoHide(),this.action&&"function"==typeof this.action.callback&&this.bindEvents())}hide(){this.removeClass(this.el,this.classes.active),this.addClass(this.el,this.classes.inactive)}autoHide(){clearTimeout(n),n=this.delay("closeDelay",this.hide)}delay(n,t){const e=this.timings[n]||this.timings.closeDelay;return setTimeout(t.bind(this),e)}bindEvents(){this.el.querySelector(`.${this.classes.action}`).addEventListener("click",this.handlers.customCallback)}customCallback(n){n.preventDefault(),this.action.callback(),this.delay("touchDelay",this.hide),n.currentTarget.removeEventListener("click",this.handlers.customCallback)}getAction(){const n=this.config.action;let t;return""!==n.title&&(t={title:n.title},n.link&&""!==n.link?t.link=n.link:n.callback&&"function"==typeof n.callback&&(t.callback=n.callback)),t}getInitialClasses(){return`${this.classes.component} ${this.classes.type}`}getTemplate(){return`<div class="${this.getInitialClasses()}">${this.getInnerTemplate()}</div>`}getInnerTemplate(){const n=this.action||{},{link:t,title:e}=n,{action:s,message:a}=this.classes,i=`<a href="${t||"#"}" class="${s}">${e}</a>`;return`<p class="${a}">${this.config.message}</p>${this.action?i:""}`}addClass(n,t){n.classList?n.classList.add(t):n.className+=` ${t}`}removeClass(n,t){n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp(`(^|\\b)${t.split(" ").join("|")}(\\b|$)`,"gi")," ")}hasClass(n,t){return n.classList?n.classList.contains(t):new RegExp(`(^| )${t}( |$)`,"gi").test(n.className)}};!function(n,t){void 0===t&&(t={});var e=t.insertAt;if(n&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===e&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}('@keyframes snackbar-show {\n  from {\n    opacity: 0;\n    transform: translate3d(-50%, 100%, 0);\n  }\n  to {\n    opacity: 1;\n    transform: translate3d(-50%, 0, 0);\n  }\n}\n@keyframes snackbar-hide {\n  0% {\n    transform: translate3d(-50%, 0, 0);\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n    transform: translate3d(-50%, 100%, 0);\n  }\n}\n.no-js .ui-snackbar, .ui-snackbar--is-active {\n  animation-name: snackbar-show;\n}\n\n.no-js .ui-snackbar__close:checked + .ui-snackbar, .ui-snackbar--is-inactive {\n  animation-name: snackbar-hide;\n  animation-fill-mode: forwards;\n}\n\n.ui-snackbar {\n  position: fixed;\n  z-index: 1022;\n  width: 100%;\n  font-size: 14px;\n  line-height: 1.25;\n  color: #fff;\n  background-color: #333;\n  bottom: 0;\n  display: table;\n  border-spacing: 20px;\n  border-collapse: separate;\n  animation-duration: 0.5s;\n  animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.ui-snackbar--default {\n  background-color: #333;\n}\n\n.ui-snackbar--success {\n  background-color: #39b54a;\n}\n\n.ui-snackbar--error {\n  background-color: #f04449;\n}\n\n.ui-snackbar__message,\n.ui-snackbar__action {\n  display: table-cell;\n}\n\n.ui-snackbar__action {\n  color: #fff;\n  background: inherit;\n  border: 0;\n  font-size: inherit;\n  text-transform: uppercase;\n  padding-left: 0;\n  height: 100%;\n  text-align: right;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n\na.ui-snackbar__action,\na.ui-snackbar__action:link,\na.ui-snackbar__action:active,\na.ui-snackbar__action:visited,\na.ui-snackbar__action:hover {\n  color: #fff;\n  text-decoration: none;\n}\n\n.ui-snackbar__close,\n.ui-snackbar__close-trigger {\n  display: none;\n}\n\n.no-js .ui-snackbar__close-trigger {\n  position: relative;\n  width: 15px;\n  height: 15px;\n  cursor: pointer;\n  display: table-cell;\n}\n.no-js .ui-snackbar__close-trigger:after, .no-js .ui-snackbar__close-trigger:before {\n  position: absolute;\n  left: 7.5px;\n  top: 0;\n  content: "";\n  height: 15px;\n  width: 2px;\n  background-color: #fff;\n  cursor: pointer;\n}\n.no-js .ui-snackbar__close-trigger:before {\n  transform: rotate(45deg);\n}\n.no-js .ui-snackbar__close-trigger:after {\n  transform: rotate(-45deg);\n}\n.ui-snackbar--is-pristine {\n  display: none !important;\n}\n\n@media (min-width: 768px) {\n  .ui-snackbar {\n    max-width: 600px;\n    bottom: 24px;\n    font-size: 16px;\n    border-radius: 4px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  .ui-snackbar__action {\n    font-size: 14px;\n  }\n}');const e=t;var s=class{constructor(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bus=n.bus,this.bus.on("snackbar:show",this.show.bind(this)),this.bus.on("snackbar:hide",this.hide.bind(this)),n.scope&&(n.scope.Snackbar=e)}show(n){return this.snackbar=new e(n),this.snackbar}hide(){return this.snackbar&&this.snackbar.hide(),this.snackbar}};return s}();
